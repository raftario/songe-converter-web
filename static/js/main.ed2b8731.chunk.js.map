{"version":3,"sources":["header.png","config.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","config","api","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateSonge","state","current","latest","split","map","s","Number","selectFile","e","preventDefault","fileInput","click","submitFile","fileSubmit","handleFIChange","file","target","files","size","setState","error","type","name","React","createRef","window","fetch","then","res","json","catch","react_default","a","createElement","Container_default","className","id","Collapse_default","in","Alert_default","variant","Card_default","Img","src","header","Body","Text","Row_default","Col_default","Button_default","onClick","block","disabled","ListGroup_default","Item","href","openLinks","action","method","encType","accept","ref","onChange","open","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ed2b8731.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header.9264d15f.png\";","export default {\r\n  api: 'https://scw.raphaeltheriault.com/'\r\n}\r\n","import React from 'react'\nimport Alert from 'react-bootstrap/Alert'\nimport Button from 'react-bootstrap/Button'\nimport Card from 'react-bootstrap/Card'\nimport Col from 'react-bootstrap/Col'\nimport Collapse from 'react-bootstrap/Collapse'\nimport Container from 'react-bootstrap/Container'\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Row from 'react-bootstrap/Row'\nimport 'whatwg-fetch'\nimport './bootstrap.min.css'\nimport config from './config'\nimport header from './header.png'\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      file: false,\n      error: false,\n      current: 'Loading...',\n      latest: 'Loading...'\n    }\n    this.fileInput = React.createRef()\n    this.fileSubmit = React.createRef()\n\n    window.fetch(config.api)\n      .then(res => res.json())\n      .then(json => {\n        const current = json.current\n        const latest = json.latest\n        this.setState({ current, latest })\n      })\n      .catch(() => this.setState({ error: 'The API doesn\\'t respond.' }))\n  }\n\n  static openLinks (e) {\n    e.preventDefault()\n    window.open('https://github.com/raftario/songe-converter-web', '_blank')\n    window.open('https://github.com/lolPants/songe-converter', '_blank')\n  }\n\n  updateSonge = () => {\n    if (this.state.current === 'Loading...' || this.state.latest === 'Loading...') return false\n\n    const current = this.state.current.split('.').map(s => Number(s))\n    const latest = this.state.latest.split('.').map(s => Number(s))\n\n    if (current[0] < latest[0]) return true\n    else if (current[1] < latest[1]) return true\n    else return current[2] < latest[2]\n  }\n\n  selectFile = e => {\n    e.preventDefault()\n    this.fileInput.current.click()\n  }\n\n  submitFile = e => {\n    e.preventDefault()\n    this.fileSubmit.current.click()\n  }\n\n  handleFIChange = e => {\n    const file = e.target.files[0]\n\n    if (!file) this.setState({ file: false, error: false })\n    else {\n      if (file.size > 2 * 1024 * 1024) {\n        this.setState({ error: 'The selected file is too large (max size is 2MB).' })\n      } else if (file.type !== 'application/zip' && file.type !== 'application/x-zip-compressed') {\n        this.setState({ error: 'The selected file is not in a valid format.' })\n      } else this.setState({ file: file.name, error: false })\n    }\n  }\n\n  render () {\n    return (\n      <Container className='p-3' id='App'>\n        <Collapse in={!!this.state.error}>\n          <div>\n            <Alert variant='danger'>{this.state.error}</Alert>\n          </div>\n        </Collapse>\n        <Card>\n          <Card.Img variant='top' src={header} />\n          <Card.Body>\n            <Card.Text className='lead'>\n              Just select your song and hit Convert !\n            </Card.Text>\n            <Card.Text>\n              Your song must be compressed in a <code>.zip</code> file.\n              You should remove the <code>song.ogg</code> file from the <code>.zip</code> before uploading your song.\n            </Card.Text>\n            <Row>\n              <Col>\n                <Button variant='outline-secondary' size='lg' onClick={this.selectFile} block>\n                  {this.state.file || 'Select file'}\n                </Button>\n              </Col>\n              <Col className='text-right'>\n                <Button variant='secondary' size='lg' disabled={!this.state.file} onClick={this.submitFile} block>\n                  Convert\n                </Button>\n              </Col>\n            </Row>\n          </Card.Body>\n          <ListGroup variant='flush'>\n            <ListGroup.Item>\n              <Row>\n                <Col>\n                  Current version: <code>{this.state.current}</code>\n                </Col>\n                <Col className='text-center'>\n                  Latest version: <code>{this.state.latest}</code>\n                </Col>\n                <Col className='text-right'>\n                  <Button variant='outline-secondary' size='sm' disabled={!this.updateSonge()}>Update</Button>\n                </Col>\n              </Row>\n            </ListGroup.Item>\n            <ListGroup.Item>\n              <Row>\n                <Col>\n                  <small className='text-muted'>Songe Converter by lolPants</small>\n                </Col>\n                <Col className='text-center'>\n                  <small className='text-muted'>Web app by Raphaël Thériault</small>\n                </Col>\n                <Col className='text-right'>\n                  <small className='text-muted'><a href='#App' onClick={App.openLinks}>View on GitHub</a></small>\n                </Col>\n              </Row>\n            </ListGroup.Item>\n          </ListGroup>\n        </Card>\n        <form className='d-none' action={config.api} method='post' encType='multipart/form-data'>\n          <input type='file' accept='application/zip' ref={this.fileInput} onChange={this.handleFIChange} />\n          <input type='submit' ref={this.fileSubmit} />\n        </form>\n      </Container>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}