(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/header.9264d15f.png"},44:function(e,t,a){e.exports=a(76)},51:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),i=a.n(l),o=a(34),c=a(35),s=a(42),u=a(36),m=a(43),p=a(40),d=a.n(p),f=a(12),h=a.n(f),g=a(10),v=a.n(g),E=a(7),b=a.n(E),w=a(39),y=a.n(w),k=a(38),x=a.n(k),S=a(13),z=a.n(S),N=a(11),C=a.n(N),I=a(41),F=a.n(I),j=(a(50),a(51),{api:"http://localhost:8080/"}),L=a(37),T=a.n(L);"/"!==j.api.charAt(j.api.length-1)&&(j.api+="/");var A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).updateSonge=function(){if("Loading..."===a.state.current||"Loading..."===a.state.latest)return!1;var e=a.state.current.split(".").map(function(e){return Number(e)}),t=a.state.latest.split(".").map(function(e){return Number(e)});return e[0]<t[0]||(e[1]<t[1]||e[2]<t[2])},a.selectFile=function(e){e.preventDefault(),a.fileInput.current.click()},a.submitFile=function(e){if(e.preventDefault(),a.file){var t=new FormData;t.append("zip",a.file);var n={method:"POST",body:t};a.setState({converting:!0}),window.fetch("".concat(j.api,"upload"),n).then(function(e){return e.json()}).then(function(e){e.error||window.open("".concat(j.api).concat(e.url),"_blank"),a.setState({file:!1,error:e.error,converting:!1}),a.file=void 0}).catch(function(){return a.setState({converting:!1,error:"An error occured while trying to upload the file."})})}else a.setState({error:"A file needs to be selected."})},a.handleFIChange=function(e){var t=e.target.files[0];t?t.size>2097152?(a.file=void 0,a.setState({file:!1,error:"The selected file is too large (max size is 2MB)."})):"application/zip"!==t.type&&"application/x-zip-compressed"!==t.type?(a.file=void 0,a.setState({file:!1,error:"The selected file is not in a valid format."})):(a.file=t,a.setState({file:t.name,error:!1})):(a.file=void 0,a.setState({file:!1,error:!1}))},a.state={file:!1,error:!1,converting:!1,current:"Loading...",latest:"Loading..."},a.fileInput=r.a.createRef(),a.file=void 0,window.fetch(j.api).then(function(e){return e.json()}).then(function(e){var t=e.current,n=e.latest;a.setState({current:t,latest:n})}).catch(function(){return a.setState({error:"The API doesn't respond."})}),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,{className:"p-3",id:"App"},r.a.createElement(y.a,{in:!!this.state.error},r.a.createElement("div",null,r.a.createElement(d.a,{variant:"danger"},this.state.error))),r.a.createElement(v.a,null,r.a.createElement(v.a.Img,{variant:"top",src:T.a}),r.a.createElement(v.a.Body,null,r.a.createElement(v.a.Text,{className:"lead"},"Just select your song and hit Convert !"),r.a.createElement(v.a.Text,null,"Your song must be compressed in a ",r.a.createElement("code",null,".zip")," file. You should remove the ",r.a.createElement("code",null,"song.ogg")," file and other unnecessary files from the ",r.a.createElement("code",null,".zip")," before uploading your song. You can put multiple songs in the same file as long as it doesn't exceed the size limit (2MB)."),r.a.createElement(C.a,null,r.a.createElement(b.a,null,r.a.createElement(h.a,{variant:"outline-secondary",size:"lg",onClick:this.selectFile,block:!0},this.state.file||"Select file")),r.a.createElement(b.a,{className:"text-right"},r.a.createElement(h.a,{variant:"secondary",size:"lg",disabled:!this.state.file,onClick:this.submitFile,block:!0},this.state.converting?r.a.createElement(r.a.Fragment,null,"Converting ",r.a.createElement(F.a,{as:"span",size:"sm",animation:"border",role:"status"})):"Convert")))),r.a.createElement(z.a,{variant:"flush"},r.a.createElement(z.a.Item,null,r.a.createElement(C.a,null,r.a.createElement(b.a,null,"Current version: ",r.a.createElement("code",null,this.state.current)),r.a.createElement(b.a,{className:"text-center"},"Latest version: ",r.a.createElement("code",null,this.state.latest)),r.a.createElement(b.a,{className:"text-right"},r.a.createElement(h.a,{variant:"outline-secondary",size:"sm",disabled:!this.updateSonge()},"Update")))),r.a.createElement(z.a.Item,null,r.a.createElement(C.a,null,r.a.createElement(b.a,null,r.a.createElement("small",{className:"text-muted"},"Songe Converter by lolPants")),r.a.createElement(b.a,{className:"text-center"},r.a.createElement("small",{className:"text-muted"},"Web app by Rapha\xebl Th\xe9riault")),r.a.createElement(b.a,{className:"text-right"},r.a.createElement("small",{className:"text-muted"},r.a.createElement("a",{href:"#App",onClick:t.openLinks},"View on GitHub"))))))),r.a.createElement("input",{className:"d-none",type:"file",name:"zip",accept:"application/zip",ref:this.fileInput,onChange:this.handleFIChange}))}}],[{key:"openLinks",value:function(e){e.preventDefault(),window.open("https://github.com/raftario/songe-converter-web","_blank"),window.open("https://github.com/lolPants/songe-converter","_blank")}}]),t}(r.a.Component);i.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.5e7a907d.chunk.js.map