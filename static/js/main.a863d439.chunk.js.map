{"version":3,"sources":["header.png","config.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","config","api","App","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateSonge","state","current","latest","split","map","s","Number","selectFile","e","preventDefault","fileInput","click","handleFIChange","file","target","files","size","setState","error","type","name","React","createRef","window","fetch","then","res","json","substring","catch","react_default","a","createElement","Container_default","className","Collapse_default","in","Alert_default","variant","Card_default","Img","src","header","Body","Text","Row_default","Col_default","Button_default","onClick","block","disabled","ListGroup_default","Item","href","openLinks","accept","ref","onChange","open","Component","ReactDOM","render","src_App","document","getElementById"],"mappings":"4EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,wVCAzBC,eAAA,CACbC,IAAK,uDC0IQC,cA5Hb,SAAAA,EAAaC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IAClBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KAwBRQ,YAAc,WACZ,GAA2B,eAAvBP,EAAKQ,MAAMC,SAAkD,eAAtBT,EAAKQ,MAAME,OAAyB,OAAO,EAEtF,IAAMD,EAAUT,EAAKQ,MAAMC,QAAQE,MAAM,KAAKC,IAAI,SAAAC,GAAC,OAAIC,OAAOD,KACxDH,EAASV,EAAKQ,MAAME,OAAOC,MAAM,KAAKC,IAAI,SAAAC,GAAC,OAAIC,OAAOD,KAE5D,OAAIJ,EAAQ,GAAKC,EAAO,KACfD,EAAQ,GAAKC,EAAO,IACjBD,EAAQ,GAAKC,EAAO,KAjCdV,EAoCpBe,WAAa,SAAAC,GACXA,EAAEC,iBACFjB,EAAKkB,UAAUT,QAAQU,SAtCLnB,EAyCpBoB,eAAiB,SAAAJ,GACf,IAAMK,EAAOL,EAAEM,OAAOC,MAAM,GAEvBF,EAECA,EAAKG,KAAO,QACdxB,EAAKyB,SAAS,CAAEC,MAAO,sDACA,oBAAdL,EAAKM,MAA4C,iCAAdN,EAAKM,KACjD3B,EAAKyB,SAAS,CAAEC,MAAO,gDAClB1B,EAAKyB,SAAS,CAAEJ,KAAMA,EAAKO,KAAMF,OAAO,IANtC1B,EAAKyB,SAAS,CAAEJ,MAAM,EAAOK,OAAO,KA1C/C1B,EAAKQ,MAAQ,CACXa,MAAM,EACNK,OAAO,EACPjB,QAAS,aACTC,OAAQ,cAEVV,EAAKkB,UAAYW,IAAMC,YAEvBC,OAAOC,MAAMpC,EAAOC,KACjBoC,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAE,GACJ,IAAMzB,EAASyB,EAAI,SAAaC,UAAU,GAC1CpC,EAAKyB,SAAS,CAAEf,aAEjB2B,MAAM,kBAAMrC,EAAKyB,SAAS,CAAEC,MAAO,+BAhBpB1B,wEAuDlB,OACEsC,EAAAC,EAAAC,cAACC,EAAAF,EAAD,CAAWG,UAAU,OACnBJ,EAAAC,EAAAC,cAACG,EAAAJ,EAAD,CAAUK,KAAMzC,KAAKK,MAAMkB,OACzBY,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACK,EAAAN,EAAD,CAAOO,QAAQ,UAAU3C,KAAKK,MAAMkB,SAGxCY,EAAAC,EAAAC,cAACO,EAAAR,EAAD,KACED,EAAAC,EAAAC,cAACO,EAAAR,EAAKS,IAAN,CAAUF,QAAQ,MAAMG,IAAKC,MAC7BZ,EAAAC,EAAAC,cAACO,EAAAR,EAAKY,KAAN,KACEb,EAAAC,EAAAC,cAACO,EAAAR,EAAKa,KAAN,CAAWV,UAAU,QAArB,2CAGAJ,EAAAC,EAAAC,cAACO,EAAAR,EAAKa,KAAN,0CACoCd,EAAAC,EAAAC,cAAA,oBADpC,gCAEwBF,EAAAC,EAAAC,cAAA,wBAFxB,kBAE4DF,EAAAC,EAAAC,cAAA,oBAF5D,gCAIAF,EAAAC,EAAAC,cAACa,EAAAd,EAAD,KACED,EAAAC,EAAAC,cAACc,EAAAf,EAAD,KACED,EAAAC,EAAAC,cAACe,EAAAhB,EAAD,CAAQO,QAAQ,oBAAoBtB,KAAK,KAAKgC,QAASrD,KAAKY,WAAY0C,OAAK,GAC1EtD,KAAKK,MAAMa,MAAQ,gBAGxBiB,EAAAC,EAAAC,cAACc,EAAAf,EAAD,CAAKG,UAAU,cACbJ,EAAAC,EAAAC,cAACe,EAAAhB,EAAD,CAAQO,QAAQ,YAAYtB,KAAK,KAAKkC,UAAWvD,KAAKK,MAAMa,KAAMoC,OAAK,GAAvE,cAINnB,EAAAC,EAAAC,cAACmB,EAAApB,EAAD,CAAWO,QAAQ,SACjBR,EAAAC,EAAAC,cAACmB,EAAApB,EAAUqB,KAAX,KACEtB,EAAAC,EAAAC,cAACa,EAAAd,EAAD,KACED,EAAAC,EAAAC,cAACc,EAAAf,EAAD,yBACmBD,EAAAC,EAAAC,cAAA,YAAOrC,KAAKK,MAAMC,UAErC6B,EAAAC,EAAAC,cAACc,EAAAf,EAAD,CAAKG,UAAU,eAAf,mBACkBJ,EAAAC,EAAAC,cAAA,YAAOrC,KAAKK,MAAME,SAEpC4B,EAAAC,EAAAC,cAACc,EAAAf,EAAD,CAAKG,UAAU,cACbJ,EAAAC,EAAAC,cAACe,EAAAhB,EAAD,CAAQO,QAAQ,oBAAoBtB,KAAK,KAAKkC,UAAWvD,KAAKI,eAA9D,aAIN+B,EAAAC,EAAAC,cAACmB,EAAApB,EAAUqB,KAAX,KACEtB,EAAAC,EAAAC,cAACa,EAAAd,EAAD,KACED,EAAAC,EAAAC,cAACc,EAAAf,EAAD,KACED,EAAAC,EAAAC,cAAA,SAAOE,UAAU,cAAjB,gCAEFJ,EAAAC,EAAAC,cAACc,EAAAf,EAAD,CAAKG,UAAU,eACbJ,EAAAC,EAAAC,cAAA,SAAOE,UAAU,cAAjB,uCAEFJ,EAAAC,EAAAC,cAACc,EAAAf,EAAD,CAAKG,UAAU,cACbJ,EAAAC,EAAAC,cAAA,SAAOE,UAAU,cAAaJ,EAAAC,EAAAC,cAAA,KAAGqB,KAAK,IAAIL,QAAS1D,EAAIgE,WAAzB,wBAMxCxB,EAAAC,EAAAC,cAAA,SACEb,KAAK,OACLe,UAAU,SACVqB,OAAO,kBACPC,IAAK7D,KAAKe,UACV+C,SAAU9D,KAAKiB,sDAlGLJ,GAChBA,EAAEC,iBACFc,OAAOmC,KAAK,kDAAmD,UAC/DnC,OAAOmC,KAAK,8CAA+C,iBAvB7CrC,IAAMsC,WCVxBC,IAASC,OAAO/B,EAAAC,EAAAC,cAAC8B,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.a863d439.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/header.9264d15f.png\";","export default {\r\n  api: 'https://scw.raphaeltheriault.com/'\r\n}\r\n","import React from 'react'\nimport Alert from 'react-bootstrap/Alert'\nimport Button from 'react-bootstrap/Button'\nimport Card from 'react-bootstrap/Card'\nimport Col from 'react-bootstrap/Col'\nimport Collapse from 'react-bootstrap/Collapse'\nimport Container from 'react-bootstrap/Container'\nimport ListGroup from 'react-bootstrap/ListGroup'\nimport Row from 'react-bootstrap/Row'\nimport 'whatwg-fetch'\nimport './bootstrap.min.css'\nimport config from './config'\nimport header from './header.png'\n\nclass App extends React.Component {\n  constructor (props) {\n    super(props)\n    this.state = {\n      file: false,\n      error: false,\n      current: 'Loading...',\n      latest: 'Loading...'\n    }\n    this.fileInput = React.createRef()\n\n    window.fetch(config.api)\n      .then(res => res.json())\n      .then(json => {\n        const latest = json['tag_name'].substring(1)\n        this.setState({ latest })\n      })\n      .catch(() => this.setState({ error: 'The API doesn\\'t respond.' }))\n  }\n\n  static openLinks (e) {\n    e.preventDefault()\n    window.open('https://github.com/raftario/songe-converter-web', '_blank')\n    window.open('https://github.com/lolPants/songe-converter', '_blank')\n  }\n\n  updateSonge = () => {\n    if (this.state.current === 'Loading...' || this.state.latest === 'Loading...') return false\n\n    const current = this.state.current.split('.').map(s => Number(s))\n    const latest = this.state.latest.split('.').map(s => Number(s))\n\n    if (current[0] < latest[0]) return true\n    else if (current[1] < latest[1]) return true\n    else return current[2] < latest[2]\n  }\n\n  selectFile = e => {\n    e.preventDefault()\n    this.fileInput.current.click()\n  }\n\n  handleFIChange = e => {\n    const file = e.target.files[0]\n\n    if (!file) this.setState({ file: false, error: false })\n    else {\n      if (file.size > 2 * 1024 * 1024) {\n        this.setState({ error: 'The selected file is too large (max size is 2MB).' })\n      } else if (file.type !== 'application/zip' && file.type !== 'application/x-zip-compressed') {\n        this.setState({ error: 'The selected file is not in a valid format.' })\n      } else this.setState({ file: file.name, error: false })\n    }\n  }\n\n  render () {\n    return (\n      <Container className='p-3'>\n        <Collapse in={!!this.state.error}>\n          <div>\n            <Alert variant='danger'>{this.state.error}</Alert>\n          </div>\n        </Collapse>\n        <Card>\n          <Card.Img variant='top' src={header} />\n          <Card.Body>\n            <Card.Text className='lead'>\n              Just select your song and hit Convert !\n            </Card.Text>\n            <Card.Text>\n              Your song must be compressed in a <code>.zip</code> file.\n              You should remove the <code>song.ogg</code> file from the <code>.zip</code> before uploading your song.\n            </Card.Text>\n            <Row>\n              <Col>\n                <Button variant='outline-secondary' size='lg' onClick={this.selectFile} block>\n                  {this.state.file || 'Select file'}\n                </Button>\n              </Col>\n              <Col className='text-right'>\n                <Button variant='secondary' size='lg' disabled={!this.state.file} block>Convert</Button>\n              </Col>\n            </Row>\n          </Card.Body>\n          <ListGroup variant='flush'>\n            <ListGroup.Item>\n              <Row>\n                <Col>\n                  Current version: <code>{this.state.current}</code>\n                </Col>\n                <Col className='text-center'>\n                  Latest version: <code>{this.state.latest}</code>\n                </Col>\n                <Col className='text-right'>\n                  <Button variant='outline-secondary' size='sm' disabled={!this.updateSonge()}>Update</Button>\n                </Col>\n              </Row>\n            </ListGroup.Item>\n            <ListGroup.Item>\n              <Row>\n                <Col>\n                  <small className='text-muted'>Songe Converter by lolPants</small>\n                </Col>\n                <Col className='text-center'>\n                  <small className='text-muted'>Web app by Raphaël Thériault</small>\n                </Col>\n                <Col className='text-right'>\n                  <small className='text-muted'><a href='#' onClick={App.openLinks}>View on GitHub</a></small>\n                </Col>\n              </Row>\n            </ListGroup.Item>\n          </ListGroup>\n        </Card>\n        <input\n          type='file'\n          className='d-none'\n          accept='application/zip'\n          ref={this.fileInput}\n          onChange={this.handleFIChange}\n        />\n      </Container>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}